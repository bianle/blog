<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>知無涯</title>

    <link rel="stylesheet" href="/themes/modernist/stylesheets/styles.css">
    <link rel="stylesheet" href="/themes/modernist/stylesheets/pygment_trac.css">
    <script src="/themes/modernist/javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
      <h1><a href="/">知無涯</a></h1>
        <p>生有涯，知無涯</p>
        <ul>
          <li><a href="https://github.com/bianle/blog/tree/gh-pages">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a> emacs 收集 
        </h1>

    <h2>安装 purcell 的 emacs.d 配置文件</h2>

<ol>
<li><code>git clone https://github.com/purcell/emacs.d.git ~/.emacs.d</code></li>
<li>删除 ~/.emacs文件</li>
<li>重启 emacs</li>
</ol>

<h2>emacs 替换</h2>

<p><kbd>M-% RET</kbd> 输入被替换的词如<code>trunk</code><kbd>RET</kbd>输入要替换的词如<code>dotfiles</code>
<kbd>RET</kbd>,按<kbd>y</kbd>替换并跳到下一个词，按<kbd>n</kbd>不替换跳到下个词。</p>

<h2>emacs 的 org-mode</h2>

<ul>
<li>介绍</li>
</ul>

<p>Org mode 是 emacs 中的一个主模式。 Org 是 organization 的缩写。这个模式的主要作用是用来记笔记，写 todo list，org mode 有一个目标，就是希望每件事情都只记录一次。 Org mode 已经是 emacs 自带的组件，如果你想用最新的 org mode，可以在这里下载：<a href="http://orgmode.org/">http://orgmode.org/</a></p>

<ul>
<li>基本用法</li>
</ul>

<p>很简单，一级标题用一个星号（*）表示，二级标题用两个星号表示，三级标题用三个星号表示，以此类推，注意，星号必须顶格写。比如，新建一个文件，在 emacs 中打开，然后敲：<kbd>M-x org-mode</kbd>，进入 org mode。然后，在文件中写入下面的内容：</p>

<blockquote>
<p>* top level<br>
** the secondlevel<br>
*** the third level<br>
somethings to write  </p>
</blockquote>

<p><em>注意，星号前不能有空格。</em></p>

<p>然后你就可以看到这些各个等级的标题和内容被合适的高亮了。你可以自由的控制这些标题和内容是被折叠还是显示出来，方法就是使用TAB。比如，把光标移动到最开始的地方，连续按TAB, org mode 会把 buffer 中的内容按照 全部折叠-&gt;展开所有标题-&gt;展开全部内容 这样的顺序循环显示。另外，还有一些快捷键可以帮助你方便的在 org mode 中间移动:</p>

<p><kbd>C-c C-n</kbd> 移动到下一个标题<br>
<kbd>C-c C-p</kbd> 移动到上一个标题<br>
<kbd>C-c C-f</kbd> 移动到和当前标题同等级的下一个标题<br>
<kbd>C-c C-b</kbd> 移动到和当前标题同等级的上一个标题<br>
<kbd>C-c C-u</kbd> 向上移动到更高一层的标题  </p>

<ul>
<li>列表</li>
</ul>

<p>在同一个子标题下，你还可以将内容划分的更细致。方法是使用这些符号： ‘-’， ‘+’， ‘*’， ‘1.’， ‘1)’。注意，这里的’*&#39;不能顶格写。 比如，在你的 org mode 的 buffer 中写入下面这些文字（从 org mode 手册上抄来的例子）：</p>

<blockquote>
<p>My favorite scenes are (in this order)<br>
1. The attack of the Rohirrim<br>
2. Eowyn’s fight with the witch king<br>
* this was already my favorite scene in the book<br>
* I really like Miranda Otto.<br>
3. Peter Jackson being shot by Legolas<br>
– on DVD only<br>
He makes a really funny face when it happens.<br>
But in the end, no individual scenes matter but the film as a whole.<br>
Important actors in this film are:<br>
– Elijah Wood :: He plays Frodo<br>
– Sean Austin :: He plays Sam, Frodo’s friend. I still remember<br>
him very well from his role as Mikey Walsh in the Goonies.  </p>
</blockquote>

<p>把光标移动到 ‘1.’ ‘2.’ 或 ‘3.’ 所在的行上，然后按 shift 加左右方向键，看看有什么效果。</p>

<ul>
<li>注脚</li>
</ul>

<p>在 org mode 中，你可以为你的文章添加注脚（footnote）。注脚的格式有两种，一是方括号+数字，二是方括号+fn+名字。比如下面有两个例子：
在 org mode 的正文中写下这两句话：</p>

<blockquote>
<p>The Org homepage[1] now looks a lot better than it used to.<br>
The Org homepage[fn:orghome] now looks a lot better than it used to.</p>
</blockquote>

<p>接下俩你可以写一些其他东西，然后在文章的末尾写上下面两句话（注意：必须要顶格写）：</p>

<blockquote>
<p>[1] The link is: http://orgmode.org<br>
[fn:orghome] The link is: http://orgmode.org</p>
</blockquote>

<p>把光标移动到正文的<code>[1]</code>处，按<kbd> C-c C-c</kbd>，可以跳转到注脚<code>[1]</code>处，在注脚<code>[1]</code>处按<kbd> C-c C-c</kbd>，可以跳转到正文的<code>[1]</code>处。对于<code>[2]</code>也一样。</p>

<ul>
<li>表格</li>
</ul>

<ol>
<li>基本表格
在 org mode 中，你可以画表格。方法很简单，在某一行顶格的位置输入<code>|</code>，然后输入表格第一行第一列的内容，再输入<code>|</code>，然后输入表格的的一行第二列的内容，以此类推。当第一行输入完成后，按 TAB， org mode 会把当前行对齐，然后为你创造出表格的下一行，让你继续输入。用 TAB 和 S+TAB可以在表格中正向或反向的移动。
比如下面的例子：</li>
</ol>

<blockquote>
<p>| 1 | one |<br>
| 2 | two |<br>
| 3 | This is a long chunk of text |<br>
| 4 | four |  </p>
</blockquote>

<p>有时候，表格的某一项特别的长，你可以在任意一个表格的空白项内输入数字来限制其所在列的长度。比如：</p>

<blockquote>
<p>| | <6> |<br>
| 1 | one |<br>
| 2 | two |<br>
| 3 | This=&gt; |<br>
| 4 | four |  </p>
</blockquote>

<p>在上面的例子中，第二列的长度不会超过6，超过的部分会被隐藏起来。你可以把鼠标移动到<code>This=&gt;</code>上面，会有浮动标签显示出该项的内容，或者输入<kbd>C-c</kbd>可以编辑被隐藏的内容。如果你发现表格的某一项没有如你预期的那样被隐藏起来，你可以在表格中的任意位置按 <kbd>C-c C-c</kbd>。</p>

<p>我们还可以把表格弄的更好看一些。在表格的某两行之间加入<code>|-</code>，然后按<kdb>TAB</kbd>，可以作出下面的效果：</p>

<blockquote>
<p>| | <6> |<br>
|—+——–|<br>
| 1 | one |<br>
| 2 | two |<br>
| 3 | This=&gt; |<br>
| 4 | four |  </p>
</blockquote>

<ol>
<li>spreadsheet</li>
</ol>

<p>你可以在表格中增加计算的功能。比如你有这样一个表格：第一列和第二列是三角形两个直角边的长度，第三列是通过勾股定理计算出的斜边长度，或者是这样一张表格：前几列是你各个科目的考试成绩，最后一列是你的平均分，那么，org mode 可以自动为你完成计算。我们以计算勾股定理为例，创建一张表格：</p>

<blockquote>
<p>| a | b | |<br>
|—+—+—|<br>
| 3 | 4 | |<br>
| 6 | 8 | |<br>
| 1 | 2 | |  </p>
</blockquote>

<p>在第二行第三列中输入<code>=($1^2+$2^2)^0.5</code>。$1和$2表示第一列和第二列，在你自己的表格中，你会使用你希望的列数进行计算。</p>

<blockquote>
<p>| a | b | |<br>
|—+—+———–|<br>
| 3 | 4 | 5. |<br>
| 6 | 8 | 10. |<br>
| 1 | 2 | 2.2360680 |<br>
#+TBLFM: $3=($1^2+$2^2)^0.5</p>
</blockquote>

<p>有时候，你输入完成后，org mode不会自动帮你对所有项都计算一边，这时，你可以输入<kbd>C-u C-c C-c</kbd>强制org mode为整个表格进行计算。如果你不想让某一列都按照公式计算，只希望在某一特定项上进行计算，你可以这样输入：<code>:=($1^2+$2^2)^0.5</code>, 即在等号前再加一个冒号。</p>

<ul>
<li>链接
你可以在 org mode 中设置连接。比如链接到当前文档的某个位置，或者链接到一个外部文件。链接到当前文档的某个位置只需这样输入：</li>
</ul>

<blockquote>
<p>[[link][description]]</p>
</blockquote>

<p>description 是你希望链接到的内容，org mode 会通过字符串搜索的方式找到第一个与 description 匹配的地方作为链接的目标。要链接到一个外部文件，只需这样输入：</p>

<blockquote>
<p>[[file:/directory/filename]]</p>
</blockquote>

<p>想要跳到链接处，可以使用快捷键<kbd>C-c C-o</kbd>，或者鼠标左键单击。对于到外部文件的链接，emacs 会试图将该文件打开。</p>

<ul>
<li>todo list</li>
</ul>

<p>Org mode 的一个很重要的功能就是写 todo list。 创建一个todo list 和创建一个 org mode 的其他标题并没有什么区别。比如你可以顶格写下这样一
行：</p>

<blockquote>
<p>* write org mode document</p>
</blockquote>

<p>然后把光标移动到这行上，按shift+左右方向键，你会发现该条目会在 TODO和 DONE 之间切换：</p>

<blockquote>
<p>* TODO write org mode document<br>
* DONE write org mode document</p>
</blockquote>

<p>这就是最简单的 todo list 了，想做什么，就在 org mode 下创建一个条目，并将其状态设置为 <code>TODO</code>，做完后将其状态设置为 <code>DONE</code>。</p>

<p>todo list 默认只有两种状态： <code>TODO</code> 和 <code>DONE</code>。我们可以再增加一些其他状态。比如在.emacs中加入下面的语句:</p>
<div class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span class="p">(</span><span class="k">setq</span> <span class="nv">org-todo-keywords</span>
      <span class="o">&#39;</span><span class="p">((</span><span class="nc">sequence</span> <span class="s">&quot;TODO&quot;</span> <span class="s">&quot;DOING&quot;</span> <span class="s">&quot;HANGUP&quot;</span> <span class="s">&quot;|&quot;</span> <span class="s">&quot;DONE&quot;</span> <span class="s">&quot;CANCEL&quot;</span><span class="p">)))</span>
</code></pre></div>
<p>可以将 todo list 的状态增加为五种：TODO，DOING，HANGUP，DONE，CANCEL。
注意，在 HANGUP 和 DONE 之间有一条竖线 “|”，在竖线之前的状态和之后的状态使用的是不同的face。</p>

<p>进一步的，我们还可以记录切换到某一种状态时的时间：</p>
<div class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span class="p">(</span><span class="k">setq</span> <span class="nv">org-todo-keywords</span>
      <span class="o">&#39;</span><span class="p">((</span><span class="nc">sequence</span> <span class="s">&quot;TODO(t)&quot;</span> <span class="s">&quot;DOING(i!)&quot;</span> <span class="s">&quot;HANGUP(h!)&quot;</span> <span class="s">&quot;|&quot;</span> <span class="s">&quot;DONE(d!)&quot;</span> <span class="s">&quot;CANCEL(c!)&quot;</span><span class="p">)))</span>
</code></pre></div>
<p>在 <code>DOING</code> <code>HANGUP</code> <code>DONE</code> 和 <code>CANCEL</code> 后的括号中都有一个<code>!</code>，这种写法表示进入到这些状态后会记录下当前时间。而每个状态后面的括号中都有一个字母，这个字母就是进入该状态的快捷键。当你想切换到某一状态时，可以输入<kbd>C-c C-t</kbd>（此时 emacs 会弹出一个提示窗口），然后输入对应的快捷键就可以把当前的条目设置为该状态。</p>

<p>注意，改变 org-todo-keywrods 之后，最好把你的 org mode 的文件关闭，然后在重新打开，否则可能会发现设置无效。</p>

<ol>
<li>导出成其他格式</li>
</ol>

<p>已经编辑好的 org mode 文档可以导出为其他格式。<br>
<kbd>C-c C-e a</kbd> 导出为文本文件。<br>
<kbd>C-c C-e h</kbd> 导出为 HTML 文件。</p>

<ol>
<li>请参考 org-mode 的文档</li>
</ol>

<p>实际上 org mode 提供的功能极其繁多。我在上面列出的只是我日常会用到的功能。 Org mode 还有很多我这篇文章中完全没有涉及的功能，而我涉及到的功能，也有许多细微的技巧没有提及。幸运的是， org mode 有一份极其详尽的文档。你可以在 emacs 中输入 <kbd>C-h i</kbd>，然后搜索 <code>org mode</code>，找到该文档。想充分发挥出 org mode 的威力，需要仔细阅读这份文档。</p>

<h2>emacs 打开文件乱码</h2>

<p>尝试修改文件编码
<kbd>M-x revert-buffer-with-coding-system RET</kbd>
输入编码如<code>chinese-gkb</code><kbd>RET</kbd>
保存时指定编码
<kbd>M-x set-buffer-file-coding-system RET</kbd>
输入编码如<code>utf-8</code><kbd>RET</kbd></p>

<p>设置默认编码</p>
<div class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span class="p">(</span><span class="nv">set-language-environment</span> <span class="s">&quot;UTF-8&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-terminal-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-keyboard-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-clipboard-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-buffer-file-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-selection-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="p">(</span><span class="nv">modify-coding-system-alist</span> <span class="ss">&#39;process</span> <span class="s">&quot;*&quot;</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
</code></pre></div>
<h2>emacs 末行去空格</h2>

<p>whitespace-cleanup-mode</p>

<h2>emacs html</h2>

<p>预览: <kbd>C-c C-v</kbd></p>


      </section>
      
      <section class="comments">
        
          <!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/emacs/2015/06/24/emacs-collect" data-title="emacs 收集" data-url="http://2le.me//emacs/2015/06/24/emacs-collect.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"2le"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

        
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/bianle">bianle</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>

