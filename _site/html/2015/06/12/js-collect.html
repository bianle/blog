<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html;charset=utf-8">
<script src="/common/js/codemirror/lib/codemirror.js"></script>
<link rel="stylesheet" href="/common/js/codemirror/lib/codemirror.css">
<script src="/common/js/codemirror/mode/xml/xml.js"></script>
<script src="/common/js/codemirror/mode/css/css.js"></script>
<script src="/common/js/codemirror/mode/javascript/javascript.js"></script>
<script src="/common/js/codemirror/mode/htmlmixed/htmlmixed.js"></script>
<script type="text/javascript" src="/common/js/jquery.js"></script>
</head>
<body>
<div id="hiddenDiv" style="display:none;"><h3>js 扩展方法</h3>

<ul>
<li>startWith , endWith</li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">String.prototype.endWith=function(s){
  if(s==null||s==&quot;&quot;||this.length==0||s.length&gt;this.length)
     return false;
  if(this.substring(this.length-s.length)==s)
     return true;
  else
     return false;
  return true;
 }

String.prototype.startWith=function(s){
  if(s==null||s==&quot;&quot;||this.length==0||s.length&gt;this.length)
   return false;
  if(this.substr(0,s.length)==s)
     return true;
  else
     return false;
  return true;
 }
</code></pre></div>
<ul>
<li>trim ltrim rtrim</li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">String.prototype.trim=function(){
　　return this.replace(/(^\s*)|(\s*$)/g, &quot;&quot;);
}
String.prototype.ltrim=function(){
　　return this.replace(/(^\s*)/g,&quot;&quot;);
}
String.prototype.rtrim=function(){
　　return this.replace(/(\s*$)/g,&quot;&quot;);
}
</code></pre></div>
<h3>js setTimeout</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;script&gt;
        function doTimer(btnId,timeId,delayTimes){

                var delayBtn = document.getElementById(btnId);
                var hideTime = document.getElementById(timeId);
                if(hideTime.innerHTML*1==1){
                        delayBtn.disabled=false;
                        delayBtn.value = &quot;获取短信验证码&quot;;
                        hideTime.innerHTML = delayTimes;
                }else{
                        delayBtn.disabled=true;
                        hideTime.innerHTML = (hideTime.innerHTML*1-1);
                        delayBtn.value =hideTime.innerHTML +&quot; 秒后获取短信验证码&quot;;
                        window.setTimeout(&quot;doTimer(&#39;&quot;+btnId+&quot;&#39;,&#39;&quot;+timeId+&quot;&#39;,&#39;&quot;+delayTimes+&quot;&#39;)&quot;,1000);
                }

        }
&lt;/script&gt;
&lt;!-- 三个参数 1、ID为delayTime的隐藏DIV；2、ID为delayBtn的button；3、隐藏DIV的innerHTML 20秒 --&gt;
&lt;div id=&quot;delayTime&quot; style=&quot;display:none;&quot;&gt;20&lt;/div&gt;
&lt;input type=&quot;button&quot; id=&quot;delayBtn&quot; style=&quot;width:180px;&quot; onclick=&quot;doTimer(&#39;delayBtn&#39;,&#39;delayTime&#39;,&#39;20&#39;);&quot; value=&quot;获取短信验证码&quot;&gt;&lt;/input&gt;
</code></pre></div>
<h3>js call</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;script&gt;

function MyObj(){  }

MyObj.prototype.myMethod = function(){

alert(this);

}

function test(){

new MyObj().myMethod(1);

MyObj.prototype.myMethod(1);

MyObj.prototype.myMethod.call(1);

}

&lt;/script&gt;
</code></pre></div>
<p>结果</p>

<blockquote>
<p>[object Object]
[object Object]
1</p>
</blockquote>

<h3>js 拖动</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;html xmlns=&quot;&lt;a href=&quot;http://www.w3.org/1999/xhtml&quot;&gt;http://www.w3.org/1999/xhtml&lt;/a&gt;&quot;&gt;

&lt;head runat=&quot;server&quot;&gt;

&lt;title&gt;&lt;/title&gt;

&lt;script language=javascript&gt;

var intX;

var intY;

var blnDrag = false; //鼠标是否已经按下

//鼠标按下

function MouseDown(event,id) {

//鼠标按下

blnDrag = true;

intX = event.clientX - GetDiv(id).style.pixelLeft;

intY = event.clientY - GetDiv(id).style.pixelTop;

}

//鼠标拖动

function DragDiv(event,id) {

//判断鼠标是否已经按下

if (!blnDrag) {

return false;

}

else {

GetDiv(id).style.pixelLeft = event.clientX - intX;

GetDiv(id).style.pixelTop = event.clientY - intY;

}

}

//鼠标松开时

function mouseUp() {

//鼠标没有按下

blnDrag = false;

}

//得到DIV

function GetDiv(id) {

return document.getElementById(id);

}

&lt;/script&gt;

&lt;/head&gt;

&lt;body &gt;

&lt;form id=&quot;form1&quot; runat=&quot;server&quot;&gt;

&lt;div id=&quot;div1&quot; style=&quot;CURSOR: move; POSITION: absolute;  WIDTH: 140px; HEIGHT: 112px; background-color:Red&quot;     onmousemove=&quot;DragDiv(event,this.id)&quot;     onmousedown=&quot;MouseDown(event,this.id)&quot;     onmouseup=&quot;mouseUp()&quot;&gt;&lt;/div&gt;

&lt;/form&gt;

&lt;/body&gt;

&lt;/html&gt;
</code></pre></div>
<h3>js 回调函数</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;html&gt;

&lt;head&gt;

&lt;title&gt;回调函数(callback)&lt;/title&gt;

&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&gt;

function a(callback)  {

alert(&quot;我是parent函数a！&quot;);

alert(&quot;调用回调函数&quot;);

callback();

}

function b(){

alert(&quot;我是回调函数b&quot;);

}

function c(){

alert(&quot;我是回调函数c&quot;);

}

function test()  {

a(b);

a(c);

}

&lt;/script&gt;

&lt;/head&gt;

&lt;body&gt;

&lt;h1&gt;学习js回调函数&lt;/h1&gt;

&lt;button onClick=test()&gt;click me&lt;/button&gt;

&lt;p&gt;应该能看到调用了两个回调函数&lt;/p&gt;

&lt;/body&gt;

&lt;/html&gt;
</code></pre></div></div>
<div id="codeAreas">

</div>



</body>
<script>

  var cms = new Array();

 $(".highlight").each(function(index){
     $("#codeAreas").append($("<textarea id='codeArea"+index+"'><textarea>"));
     $("#codeArea"+index).html($(this).find("code").html());
     var obj = CodeMirror.fromTextArea(document.getElementById("codeArea"+index),{
      lineNumbers: true,
      mode: "htmlmixed"
     });
     cms.push(obj);
     $("#codeAreas").append("<input type=\"button\" onclick=\"runCode("+index+")\" value=\"运行\"></input>");
 });



 function runCode(ind){
    //alert(myCodeMirror.doc.getValue());

    var winname = window.open('', "_blank", '');
    var content =cms[ind].doc.getValue();
    winname.document.open('text/html', 'replace');
    winname.opener = null
    winname.document.writeln(content);
    winname.document.close();
 }


</script>
</html>
